{% extends 'base1.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/All-Tickets.css' %}">

<form action="" method="get">
    <nav class="navbar navbar-expand-lg navbar-light bg-light second-navbar" style="margin-left: 0px; margin-top: -40px;">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent2" aria-controls="navbarSupportedContent2" aria-expanded="false" aria-label="Toggle navigation2">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse bg-light" id="navbarSupportedContent2">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item form-inline my-2 my-lg-0">
                    <input type="checkbox" class="select-all-checkbox" />
                </li>
                <li class="nav-item active form-inline my-2 my-lg-0 selection-list">
                    <label for="sel1" class="nav-link">Sort by: </label>
                    <select name="ordering_by" id="sel1" class="selectpicker" data-width="150px" data-style="btn-white" onchange="this.form.submit()">  
                        <option>select</option>
                        <option value="start_date">start_date</option>
                        <option value="licensed_upto">Licensed upto</option>
                        
                    </select>
                </li>
                <li class="nav-item active form-inline my-2 my-lg-0 selection-list">
                    <label for="sel2" class="nav-link">Order: </label>
                    <select name="asddes" id="sel2" class="selectpicker" data-width="150px" data-style="btn-white" onchange="this.form.submit()">
                        <option>select</option>
                        <option value="ascending">Ascending</option>
                        <option value="descending">Descending</option>
                    </select>
                </li>
            </ul>
            <ul class=" navbar-nav my-2 my-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#">
                        <span class="make-box">
                            Export
                        </span>
                    </a>
                </li>
                <li class="nav-item active">
                    <span class="nav-link">
                        1-3 of 3
                    </span>
                </li>
                <li class="nav-item active move-buttons nav-link">
                    <a class="" href="#">
                        <span class="make-box" data-toggle="tooltip" data-placement="bottom" title="Previous Page">
                            <img src="{% static 'images/left-move.png' %}" />
                        </span>
                    </a>
                    <a class="" href="#">
                        <span class="make-box" data-toggle="tooltip" data-placement="bottom" title="Next Page">
                            <img class="flip-image" src="{% static 'images/left-move.png' %}" />
                        </span>
                    </a>
                </li>
                <li class="nav-item show-filters active nav-link" onclick=showFilters()>
                    <div data-toggle="collapse" data-target="#filter-list-id" aria-controls="filter-list-id" aria-expanded="false" aria-label="Toggle Filters">
                        <span class="make-box " data-toggle="tooltip" data-placement="bottom" title="Show Filters">
                            <img src="{% static 'images/show.png' %}" />
                        </span>
                    </div>
                </li>
                <li class="nav-item hide-filters nav-link" onclick=hideFilters()>
                    <div data-toggle="collapse" data-target="#filter-list-id" aria-controls="filter-list-id" aria-expanded="false" aria-label="Toggle Filters">
    
                        <span class="make-box " data-toggle="tooltip" data-placement="bottom" title="Hide Filters" data-toggle="collapse" data-target="#filter-list-id" aria-controls="filter-list-id" aria-expanded="false" aria-label="Toggle Filters">
                            <img class="flip-image" src="{% static 'images/show.png' %}" />
                        </span>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</form>

<div class="container-fluid row main-container-all-tickets" style="margin: 10px 0px;">
    <!---------------------------- TICKET LIST START --------------------------------------->
    <div class="ticket-list col-md">
        {% if object_list %}
        {% for obj in object_list %}
        <div class="item row">
            <div class="left col-md">
                <div class="heading">
                        {{ obj.name }}
                </div>
                <div class="details row">
                    <div class="col-md">
                        <img src="{% static 'images/ticket-fields.png' %}" />
                        <span class="agent">
                            {{ obj.description }}
                        </span>
                    </div>
                    <div class="col-md">
                        <img src="{% static 'images/name.png' %}" />
                        <span class="agent">
                            Vendor: {{ obj.vendor }}
                        </span>
                    </div>
                    <div class="col-md">
                        <img src="{% static 'images/heading-image.png' %}" />
                        <span class="agent">
                            Quantity: {{ obj.quantity }}
                        </span>
                    </div>

                    <div class="col-md">
                        <img src="{% static 'images/resolved.png' %}" />
                        <span class="agent">
                            Licensed:
                            {% if obj.licensed %}
                            Yes
                            {% else %}
                            No
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>
            <div class="left col-md">
                <br>
                <div class="details row">
                    <div class="col-md">
                        <img src="{% static 'images/multiple-products.png' %}" />
                        <span class="agent">
                            Item type: {{ obj.get_item_type_display }}
                        </span>
                    </div>
                    <div class="col-md">
                        <img src="{% static 'images/calendar.png' %}" />
                        <span class="agent">
                            License activation date: {{ obj.start_date }}
                        </span>
                    </div>
                    <div class="col-md">
                        <img src="{% static 'images/time.png' %}" />
                        <span class="agent">
                            {% if obj.end_date < today %}
                            License expired
                            {% elif obj.end_date %}
                            Expires in:
                                {{ obj.end_date|timeuntil:today }}
                            {% else %}
                            Expires in: -
                            {% endif %}
                        </span>
                    </div>
                    <div class="col-md">
                        <img src="{% static 'images/settings-group.png' %}" />
                        <span class="agent">
                            Users:
                            {% for user in obj.users.all %}
                            {% if forloop.last %}
                            {{user}}
                            {% else %}
                            {{user}},
                            {% endif %}
                            {% endfor %}
                        </span>
                    </div>
                </div>
            </div>
            <div class="right col-md">
                <br>
                <a href="{% url 'HR_inventory:software-update' obj.id %}"><button class="btn btn-sm btn-info">Update</button></a>
                <br>
                <a href="{% url 'HR_inventory:software-delete' obj.id %}"><button class="btn btn-sm btn-danger">Delete</button></a>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="card">
            <div class="card-body">
                <h2>There are no softwares in the inventory.</h2>
            </div>
        </div>
        {% endif %}

    </div>
    <!---------------------------- TICKET LIST END --------------------------------------->


    <!---------------------------- FILTER LIST START --------------------------------------->
    <div class="collapse filter-list col-md-3 order-first order-md-last" id="filter-list-id">
        <form action="" method="get">
        <div class="for-scrolling">
            <div class="heading">
                <div>
                    FILTERS
                </div>
                <div class="pic" onclick=hideFilters()>
                    +
                </div>
            </div>
            <div class="list">

                <div class="item">
                    <div class="name">
                        Software Name:
                    </div>
                    <select name="software_name" class="selectpicker ml-2 filter-sel" data-live-search="true" multiple title="Any" id="filter-sel-1">
                        {% for obj in object_list %}
                        <option value="{{ obj }}">{{ obj }}</option>
                        {% endfor %}
                    </select>
                </div>


                <div class="item">
                    <div class="name">
                        Item Type
                    </div>
                    <select name="item_type" class="selectpicker ml-2 filter-sel" data-live-search="true" multiple title="Any" id="filter-sel-1">
                        <option value="O">OS</option>
                        <option value="A">Application</option>
                        
                        
                    </select>
                </div>

                <div class="item">
                    <div class="name">
                        licensed
                    </div>
                    <input type="checkbox" name="licensed" id="">
                </div>

                <div class="item">
                    <div class="name">
                        Manufacture After
                    </div>
                    <input type="date" name="mfg_date" id="">
                </div>


                <div class="item">
                    <div class="name">
                        Users
                    </div>
                    <select name="user_name" class="selectpicker ml-2 filter-sel" data-live-search="true" multiple title="Any" id="filter-sel-1">
                        {% for u in users %}
                        <option value="{{ u }}">{{ u }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="item">
                    <div class="name">
                        Vendors
                    </div>
                    <select name="vendor_name" class="selectpicker ml-2 filter-sel" data-live-search="true" multiple title="Any" id="filter-sel-1">
                        {% for ven in vendors %}
                        <option value="{{ ven }}">{{ ven }}</option>
                        {% endfor %}
                    </select>
                </div>

                

            </div>
            <!--list end-->
        </div>
        <button class="apply-button-div btn-block apply-button-div-all-tickets" type="submit" name="filter">
            <div class="apply-button">
                Apply
            </div>
        </button>
        </form>
    </div>
    <!--filter list end-->
</div>
</div>


<!-- Bootstrap -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>

<!-- For styling select tags -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-*.min.js"></script> -->

<!--For tooltip -->
<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>


<!--Js-->
<script src="{% static 'js/All-Tickets.js' %}"></script>

<!--Js for navbar and sidebar -->
<script src="{% static 'js/Main.js' %}"></script>


{% endblock %}